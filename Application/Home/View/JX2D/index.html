<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>简衣制造</title>
    <link rel="stylesheet" href="__JXRESOURCE__/basic/css/bootstrap{$Think.config.DOT_MIN}.css">
    <!--<script src="__JXRESOURCE__/basic/css/jquery.nstSlider{$Think.config.DOT_MIN}.css"></script>-->
    <link rel="stylesheet" href="__JXRESOURCE__/basic/css/jx{$Think.config.DOT_MIN}.css">
    <link rel="stylesheet" href="__JXRESOURCE__/2d/css/jx2d{$Think.config.DOT_MIN}.css">
    <script src="__JXRESOURCE__/basic/js/sea-2.3.0{$Think.config.DOT_MIN}.js"></script>
    <script src="__JXRESOURCE__/basic/js/jquery-2.1.4{$Think.config.DOT_MIN}.js"></script>
    <script src="__JXRESOURCE__/basic/js/bootstrap{$Think.config.DOT_MIN}.js"></script>
    <script src="__JXRESOURCE__/basic/js/jquery.nstSlider{$Think.config.DOT_MIN}.js"></script>

</head>
<body>
<div class="container-fiuld">
    <div class="jx2d-container">
        <div class="control-left">
            <div class="viewport-group">
                <canvas class="viewport-2d"></canvas>
            </div>
            <div class="row jxrow-padding-5">
                <div class="col-sm-2">
                    <div class="project-template-group"></div>
                </div>
                <div class="col-sm-2">
                    <div class="project-template-group"></div>
                </div>
                <div class="col-sm-2">
                    <div class="project-template-group"></div>
                </div>
                <div class="col-sm-2">
                    <div class="project-template-group"></div>
                </div>
                <div class="col-sm-2">
                    <div class="project-template-group"></div>
                </div>
                <div class="col-sm-2">
                    <div class="project-template-group"></div>
                </div>
            </div>
            <div class="spot-place"></div>
        </div>

        <div class="control-right">
            <h3>标题位置: XXXX</h3>
            <h5>￥59.9</h5>
            <!-- <select style="width: 100%">
                <option value ="volvo">Volvo</option>
                <option value ="saab">Saab</option>
                <option value="opel">Opel</option>
                <option value="audi">Audi</option>
            </select> -->

            <!-- style select -->
            <div class="dropdown">
                <button class="btn btn-default btn-block dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Dropup
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                </ul>
            </div>

            <!-- size panel -->
            <div style="width: 30%; margin-top: 10px;">
                <div class="input-group input-group-sm">
                    <span class="input-group-btn">
                        <button class="btn btn-default">
                            <span class="glyphicon glyphicon-minus"></span>
                        </button>
                    </span>
                    <input type="text" class="form-control" placeholder="The is number" value="1" pattern="[0-9]">
                    <span class="input-group-btn">
                        <button class="btn btn-default">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </span>
                </div>
            </div>

            <!-- color panel -->
            <div class="row jxrow-padding-2">
                <div class="col-sm-2">
                    <span style="line-height: 34px">颜色选择</span>
                </div>
                <div class="col-sm-10">
                    <div class="row jxrow-padding-2">
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                        <div class="col-xs-3 col-sm-1">
                            <div class="color-group"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6">
                    <div class="dropdown">
                        <button class="btn btn-default btn-block dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Dropup
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                            <li><a href="#">Action</a></li>
                            <li><a href="#">Another action</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-6">
                    <button class="btn btn-default btn-block">text</button>
                </div>
            </div>

            <div class="jx2d-properties-panel">
                <!--position-->
                <div class="row jxrow-padding-2">
                    <div class="col-sm-2">
                        <span class="jxnstLabel-2">位置</span>
                    </div>
                    <div class="col-sm-10">
                        <div class="jxntSlider-group">
                            <div class="jxnstInput-g"><input type="text" class="jxNumber form-control" style="ime-mode:disabled"></div>
                            <div class="jxnstSlider-g">
                                <div class="jxnstSlider" data-range_min="-360" data-range_max="360" data-cur_min="80" typename="pos_x"><div class="leftGrip"></div></div>
                            </div>
                        </div>


                        <div class="jxntSlider-group">
                            <div class="jxnstInput-g"><input type="text" class="jxNumber form-control" style="ime-mode:disabled"></div>
                            <div class="jxnstSlider-g">
                                <div class="jxnstSlider" data-range_min="-360" data-range_max="360" data-cur_min="80" typename="pos_x"><div class="leftGrip"></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--rotation-->
                <div class="row jxrow-padding-2">
                    <div class="col-sm-2">
                        <span class="jxnstLabel">旋转</span>
                    </div>
                    <div class="col-sm-10">
                        <div class="jxntSlider-group">
                            <div class="jxnstInput-g"><input type="text" class="jxNumber form-control" style="ime-mode:disabled"></div>
                            <div class="jxnstSlider-g">
                                <div class="jxnstSlider" data-range_min="-360" data-range_max="360" data-cur_min="80" typename="rotation"><div class="leftGrip"></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--scale-->
                <div class="row jxrow-padding-2">
                    <div class="col-sm-2">
                        <span class="jxnstLabel">缩放</span>
                    </div>
                    <div class="col-sm-10">
                        <div class="jxntSlider-group">
                            <div class="jxnstInput-g"><input type="text" class="jxNumber form-control" style="ime-mode:disabled"></div>
                            <div class="jxnstSlider-g">
                                <div class="jxnstSlider" data-range_min="1" data-range_max="1000" data-cur_min="100" typename="scale"><div class="leftGrip"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--text content-->
            <div class="jx2d-content-select">
                <span>内容</span>
                <input type="text" class="form-control" placeholder="Content">
            </div>

            <div class="jx2d-properties-text">
                <!--font, color, strokeColor, shadowColor-->
                <div class="row jxrow-padding-0">
                    <div class="col-sm-3">
                        <div class="jx2d-font-select">
                            <span>字体</span>
                            <div class="btn-group">
                                <button type="button" class="btn btn-default">Action</button>
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span class="caret"></span>
                                    <span class="sr-only">Toggle Dropdown</span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Action</a></li>
                                    <li><a href="#">Another action</a></li>
                                    <li><a href="#">Something else here</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="#">Separated link</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="jx2d-color-select">
                            <span>颜色</span>
                            <icon></icon>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="jx2d-color-select">
                            <span>描边</span>
                            <icon></icon>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="jx2d-color-select">
                            <span>阴影</span>
                            <icon></icon>
                        </div>
                    </div>
                </div>

                <!--text size-->
                <div class="row jxrow-padding-2">
                    <div class="col-sm-2">
                        <span class="jxnstLabel">大小</span>
                    </div>
                    <div class="col-sm-10">
                        <div class="jxntSlider-group">
                            <div class="jxnstInput-g"><input type="text" class="jxNumber form-control" style="ime-mode:disabled"></div>
                            <div class="jxnstSlider-g">
                                <div class="jxnstSlider" data-range_min="0" data-range_max="360" data-cur_min="80" typename="text_size"><div class="leftGrip"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--text space-->
                <div class="row jxrow-padding-2">
                    <div class="col-sm-2">
                        <span class="jxnstLabel">间距</span>
                    </div>
                    <div class="col-sm-10">
                        <div class="jxntSlider-group">
                            <div class="jxnstInput-g"><input type="text" class="jxNumber form-control" style="ime-mode:disabled"></div>
                            <div class="jxnstSlider-g">
                                <div class="jxnstSlider" data-range_min="0" data-range_max="1000" data-cur_min="300" typename="text_space"><div class="leftGrip"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--text arc-->
                <div class="row jxrow-padding-2">
                    <div class="col-sm-2">
                        <span class="jxnstLabel">弧度</span>
                    </div>
                    <div class="col-sm-10">
                        <div class="jxntSlider-group">
                            <div class="jxnstInput-g"><input type="text" class="jxNumber form-control" style="ime-mode:disabled"></div>
                            <div class="jxnstSlider-g">
                                <div class="jxnstSlider" data-range_min="-36000" data-range_max="36000" data-cur_min="0" typename="text_arc"><div class="leftGrip"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="jx2d-properties-photo">
                <div class='row jxrow-padding-5'>
                    <div class='col-sm-2'>
                        <div class='jx2d-filter-group'></div>
                    </div>
                    <div class='col-sm-2'>
                        <div class='jx2d-filter-group'></div>
                    </div>
                    <div class='col-sm-2'>
                        <div class='jx2d-filter-group'></div>
                    </div>
                    <div class='col-sm-2'>
                        <div class='jx2d-filter-group'></div>
                    </div>
                    <div class='col-sm-2'>
                        <div class='jx2d-filter-group'></div>
                    </div>
                    <div class='col-sm-2'>
                        <div class='jx2d-filter-group'></div>
                    </div>
                    <div class='col-sm-2'>
                        <div class='jx2d-filter-group'></div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<script>
(function() {

    // set canvas height
    var jquery_viewport = $(".viewport-2d");
    jquery_viewport.css({height: jquery_viewport.css("width")});

    var jquery_project_tmp = $(".project-template-group");
    jquery_project_tmp.css({height: jquery_project_tmp.css("width")});

    $(window).on("resize", function() {
        jquery_viewport.css({height: jquery_viewport.css("width")});
        jquery_project_tmp.css({height: jquery_project_tmp.css("width")});
    });

    $('.jxnstSlider').nstSlider({
        "left_grip_selector": ".leftGrip",
        "value_changed_callback": function(cause, leftValue, rightValue) {
//            $(this).parent().find('.leftLabel').text(leftValue);

            var val_left = (parseFloat(leftValue) / 100).toFixed(2);
            $(this).parent().parent().find(".jxnstInput-g").children().val(val_left);
            var type_name = $(this).attr("typename");
            console.log(type_name);
        }
    });



    $(".jxNumber").on("input", function() {

        var val = $(this).val().replace(/[^0-9\.\-]/,'');

        // remove - (ex before)
        var _val = val.replace(/\-/g, '');
        if(val[0] === "-") {
            _val = "-" + _val;
        }

        // remove - (only one)
        var _vals = [];
        var isDot = false;
        for(var i=0; i<_val.length; i++) {
            if(_val[i] === ".") {
                if(!isDot) {
                    _vals.push(_val[i]);
                    isDot = true;
                }
            } else {
                _vals.push(_val[i]);
            }
        }

        $(this).val(_vals.join(''));
    });
})();
</script>
</body>

</html>